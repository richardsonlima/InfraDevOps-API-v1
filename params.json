{"name":"InfraDevOps-API","tagline":"A Python API written with Flask Framework to collect servers health data.","body":"===============================\r\nInfraDevOps-API (Test)\r\n===============================\r\n\r\n**InfraDevOPS API ** is a Python API written with Flask Micro Framework to collect servers health data.\r\n\r\nFollow me on Twitter: `@InfraDevOps`\r\n\r\n### Installation\r\n\r\nInstructions on this page will guide you through installation process.  \r\n\r\ngit clone https://github.com/richardsonlima/InfraDevOps-API-v1.git \r\n\r\n### Dependencies\r\n\r\nSupported python version is 2.7, below is the list of packages required to run project:\r\n\r\n    $ sudo yum -y install python-pip\r\n    $ sudo pip install --upgrade pip\r\n    $ sudo yum group install \"Development Tools\"\r\n    $ sudo yum install python-devel mysql-devel\r\n    $ sudo pip install MySQL-python\r\n    $ sudo pip install flask\r\n\r\n### Provisioning with Docker\r\n\r\nComming soon =D\r\n\r\n### System Dependencies (Centos 7.1)\r\nBelow are listed commands which will preper on a cloud server::\r\n\r\n    $ wget https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\r\n    $ sudo rpm -Uvh epel-release-latest-7.noarch.rpm\r\n    \r\nDatabase environment::\r\n\r\n    $ wget http://repo.mysql.com/mysql-community-release-el7-5.noarch.rpm\r\n    $ sudo rpm -ivh mysql-community-release-el7-5.noarch.rpm\r\n    $ sudo yum update\r\n    $ sudo yum install mysql-server\r\n    $ sudo systemctl start mysqld\r\n    $ sudo mysql_secure_installation\r\n    \r\nCreate Database::\r\n\r\n    $ mysql -u root -p\r\n    CREATE DATABASE api;\r\n    CREATE USER 'apiuser'@'localhost' IDENTIFIED BY 'password';\r\n    CREATE USER 'apiuser'@'%' IDENTIFIED BY 'password';\r\n    GRANT ALL PRIVILEGES ON api.* TO 'apiuser'@'localhost';\r\n    GRANT ALL PRIVILEGES ON api.* TO 'apiuser'@'%';\r\n    FLUSH PRIVILEGES;\r\n    use api;\r\n\r\nImport Database Dump::\r\n\r\n    $ wget https://raw.githubusercontent.com/richardsonlima/InfraDevOps-API-v1/master/db_dump.sql\r\n    $ mysql-u root -p api < db_dump.sql\r\n  \r\nFirewall Requirements::\r\n\r\n    $ sudo systemctl status firewalld\r\n    $ sudo firewall-cmd --state\r\n    $ sudo  firewall-cmd --zone=public --permanent --add-port=5000/tcp\r\n    $ sudo firewall-cmd --reload\r\n\r\nRun API::\r\n    \r\n    $ wget https://raw.githubusercontent.com/richardsonlima/InfraDevOps-API-v1/master/api.py .\r\n    $ python api.py  \r\n    * Running on http://0.0.0.0:5000/ (Press CTRL+C to quit)\r\n    * Restarting with stat\r\n    * Debugger is active!\r\n\r\n\r\nInsert a new server test::\r\n\r\n    $ curl -i -H \"Content-Type: application/json\" -X POST -d '{\"sistema\": \"LINUX\", \"hostname\":\"LNXSRV-TESTE005\", \"percentual_memoria\":\"50%\", \"percentual_cpu\":\"45%\", \"percentual_disco\":\"20%\", \"carga\":\"25%\"}' http://10.101.0.7:5000/api/v1/collector/add\r\n    \r\n    OR \r\n    \r\n    $ wget https://raw.githubusercontent.com/richardsonlima/InfraDevOps-API-v1/master/agent_pycurl.py .\r\n    $ python ./agent_pycurl.py\r\n\r\nRequest servers again to see what you just added::\r\n\r\n    $ curl -i -X GET http://localhost:5000/api/v1/collector/view\r\n    \r\nUsing php to see your database inserts ::\r\n\r\n    $ sudo yum install httpd\r\n    $ sudo systemctl enable httpd.service\r\n    $ sudo systemctl restart httpd.service\r\n    $ sudo yum install php php-pear\r\n    $ sudo yum install php-mysql\r\n    $ sudo systemctl reload httpd\r\n    $ sudo  firewall-cmd --zone=public --permanent --add-port=80/tcp\r\n    $ sudo firewall-cmd --reload\r\n    $ sudo systemctl reload httpd\r\n    $ cd /var/www/html && wget https://raw.githubusercontent.com/richardsonlima/InfraDevOps-API-v1/master/dash.php .\r\n    \r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}